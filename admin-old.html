<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Admin - Argentina Content</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    body { font-family: Poppins, sans-serif; }
    .wrap { max-width: 980px; margin:20px auto; }
    textarea { width:100%; height:200px; }
    .row { display:flex; gap:10px; align-items:center; margin-bottom:8px; }
    .row input, .row select { padding:6px; }
    .items-list { margin-top:12px; }
    .item { padding:8px; border:1px solid #eee; margin-bottom:6px; }
    button { padding:8px 10px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Admin - JSON</h1>
    <p>Editar / añadir items y descargar data.json. No hay guardado en servidor; descarga el JSON y reemplazalo en el proyecto.</p>
    <div>
      <button id="load">Cargar data.json</button>
      <button id="download">Descargar JSON</button>
    </div>
    <h2>Añadir nuevo item</h2>
    <div class="row">
      <input id="nid" placeholder="id (p.ej. v99)" />
      <input id="ntitle" placeholder="Título" />
      <input id="nyear" placeholder="Año" style="width:90px" />
      <input id="nchannel" placeholder="Canal" />
    </div>
    <div class="row">
      <input id="ngenre" placeholder="Género" />
      <input id="nimage" placeholder="Ruta imagen" />
      <select id="norient"><option value="vertical">vertical</option><option value="horizontal">horizontal</option></select>
    </div>
    <div class="row">
      <input id="nactors" placeholder="Actores (separados por | hasta 6)" />
      <input id="nsubtitle" placeholder="Subtítulo" />
      <button id="add">Añadir</button>
    </div>

    <h2>Items (editable)</h2>
    <div id="items" class="items-list"></div>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script>
    var items = [];
    function renderList(){
      var $c = $('#items'); $c.empty();
      items.forEach(function(it,idx){
        var $d = $('<div>').addClass('item');
        $d.html('<strong>'+it.id+'</strong> — '+it.title+' ('+(it.year||'')+') <br/> <small>'+ (it.channel||'') + ' • ' + (it.genre||'') + '</small>');
        var $rm = $('<button>').text('Eliminar').on('click', function(){ items.splice(idx,1); renderList(); });
        $d.append($rm);
        $c.append($d);
      });
    }
    $('#load').on('click', function(){ fetch('data.json').then(r=>r.json()).then(function(d){ items = d.items||[]; renderList(); alert('Cargado ' + items.length + ' items'); }).catch(function(){ alert('No se pudo cargar data.json'); }); });
    $('#add').on('click', function(){ var actors = $('#nactors').val().split('|').map(function(a){ return a.trim(); }).filter(Boolean).slice(0,6); var it = { id: $('#nid').val().trim(), title: $('#ntitle').val().trim(), year: $('#nyear').val().trim(), channel: $('#nchannel').val().trim(), genre: $('#ngenre').val().trim(), actors: actors, orientation: $('#norient').val(), image: $('#nimage').val().trim(), subtitle: $('#nsubtitle').val().trim() }; items.push(it); renderList(); });
    $('#download').on('click', function(){ var out = { items: items }; var blob = new Blob([JSON.stringify(out, null, 2)], {type:'application/json'}); var url = URL.createObjectURL(blob); var a = document.createElement('a'); a.href=url; a.download='data.json'; document.body.appendChild(a); a.click(); setTimeout(function(){ URL.revokeObjectURL(url); a.remove(); }, 1000); });
  </script>
</body>
</html>