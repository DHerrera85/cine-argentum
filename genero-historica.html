<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pel√≠culas Hist√≥ricas - Cine Argentum</title>
  <link rel="stylesheet" href="css/style.css?v=2.0">
  <style>
    .actor-wrap { max-width: 1200px; margin: 28px auto; padding: 20px; }
    .actor-header { display: flex; align-items: center; gap: 16px; margin-bottom: 32px; }
    .actor-badge { width: 80px; height: 80px; border-radius: 12px; background: linear-gradient(135deg, #AB47BC 0%, #6A1B9A 100%); display: flex; align-items: center; justify-content: center; color: #fff; font-weight: bold; font-size: 36px; box-shadow: 0 4px 12px rgba(171, 71, 188, 0.18); }
    .actor-info h1 { margin: 0 0 6px; font-size: 28px; color: #fff; }
    .actor-info p { margin: 0; color: #b0b0b0; }
    .back-link { display: inline-block; margin-bottom: 16px; color: #AB47BC; text-decoration: none; font-weight: 600; }
    @media (max-width: 768px) { .actor-header { flex-direction: column; align-items: flex-start; } .actor-info h1 { font-size: 22px; } }
    body { background: #181d23; color: #e5e5e5; }
    .actor-movies-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 28px 18px; margin: 32px 0 40px 0; padding: 0 12px; }
    @media (max-width: 900px) { .actor-movies-grid { grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 600px) { .actor-movies-grid { grid-template-columns: repeat(2, 1fr); gap: 18px 8px; margin: 18px 0 24px 0; padding: 0 4px; } }
    .actor-movie-card { background: #23272f; border-radius: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.13); overflow: hidden; display: flex; flex-direction: column; align-items: stretch; transition: transform 0.18s; }
    .actor-movie-card:hover { transform: translateY(-4px) scale(1.03); box-shadow: 0 6px 24px rgba(0,0,0,0.18); }
    .actor-movie-card img {
      width: 100%;
      aspect-ratio: 2/3;
      object-fit: cover;
      background: #181d23;
      display: block;
      border-bottom-left-radius: 22px;
      border-bottom-right-radius: 22px;
      border-top-left-radius: 0;
      border-top-right-radius: 0;
    }
    .actor-movie-info { padding: 14px 12px 12px 12px; display: flex; flex-direction: column; gap: 4px; }
    .actor-movie-title { font-size: 1.08rem; font-weight: 600; color: #fff; margin-bottom: 2px; line-height: 1.18; }
    .actor-movie-meta { font-size: 0.97rem; color: #b0b0b0; margin-bottom: 1px; }
    .actor-movie-viewers { font-size: 0.93rem; color: #AB47BC; }
    .actor-filters { display: flex; align-items: center; gap: 10px; margin: 0 0 10px 0; padding: 0 12px; }
    .actor-filters label { font-size: 1rem; color: #b0b0b0; }
    .custom-select { position: relative; min-width: 210px; background: #23272f; border-radius: 6px; cursor: pointer; user-select: none; box-shadow: 0 2px 8px rgba(0,0,0,0.10); border: 1px solid #333; transition: border-color 0.18s; }
    .custom-select.open, .custom-select:focus { border-color: #AB47BC; z-index: 20; }
    .custom-select-selected { display: block; padding: 8px 36px 8px 14px; font-size: 1rem; color: #e5e5e5; background: transparent; border-radius: 6px; position: relative; }
    .custom-select-selected:after { content: ''; position: absolute; right: 14px; top: 50%; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 7px solid #AB47BC; transform: translateY(-50%); pointer-events: none; }
    .custom-select-options { position: absolute; left: 0; right: 0; top: 100%; background: #23272f; border-radius: 0 0 6px 6px; box-shadow: 0 6px 24px rgba(0,0,0,0.18); margin: 0; padding: 0; z-index: 30; border: 1px solid #333; border-top: none; }
    .custom-select-options li { padding: 12px 16px; color: #e5e5e5; font-size: 1rem; cursor: pointer; transition: background 0.13s, color 0.13s; }
    .custom-select-options li.selected, .custom-select-options li:hover { background: #AB47BC; color: #23272f; }
    @media (max-width: 600px) { .actor-filters { flex-direction: column; align-items: stretch; gap: 6px; } .custom-select { min-width: 100%; width: 100%; } .custom-select-selected { font-size: 1.08rem; padding: 12px 36px 12px 14px; } .custom-select-options li { font-size: 1.08rem; padding: 16px 18px; } }
  </style>
</head>
<body>
  <div class="actor-wrap">
    <main>
      <a href="index.html" class="back-link" aria-label="Volver a la p√°gina anterior">&larr; Volver</a>
      <div class="actor-header">
        <div class="actor-badge">üìú</div>
        <div class="actor-info">
          <h1>Pel√≠culas Hist√≥ricas</h1>
          <p id="actor-movie-count">Cargando pel√≠culas...</p>
        </div>
        <div class="actor-filters" style="margin-bottom:0; margin-left:auto;">
          <label for="actorSortCustom">Ordenar/Filtrar por:</label>
          <div class="custom-select" id="actorSortCustom" tabindex="0">
            <span class="custom-select-selected">Cantidad de espectadores</span>
            <ul class="custom-select-options" style="display:none;">
              <li data-value="viewers" class="selected">Cantidad de espectadores</li>
              <li data-value="year">A√±o de estreno (descendente)</li>
              <li data-value="year-asc">A√±o de estreno (ascendente)</li>
              <li data-value="decada-1990">Pel√≠culas de la d√©cada de 1990</li>
              <li data-value="decada-2000">Pel√≠culas de la d√©cada del 2000</li>
              <li data-value="decada-2010">Pel√≠culas de la d√©cada del 2010</li>
              <li data-value="decada-2020">Pel√≠culas de la d√©cada del 2020</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="actor-movies-grid" id="actorMoviesList">
        <!-- Pel√≠culas Hist√≥ricas -->
      </div>
    </main>
  </div>
  <script src="js/lightslider.js"></script>
  <script>
    // Lista estricta de t√≠tulos de pel√≠culas hist√≥ricas (IDs y t√≠tulos del listado oficial)
    const historicaTitles = [
      "Iluminados por el Fuego","Revoluci√≥n, el cruce de los andes","El √Ångel","El clan","Infancia clandestina","Kamchatka","Felicitas","Atraco","Wakolda, el M√©dico Alem√°n","Whisky, Romeo, Zul√∫","Aballay, el hombre sin miedo","La Fuga","Cr√≥nica de una Fuga","Hermanas","Argentina, 1985"
    ];
    let historicaMovies = [];
    fetch('data.json')
      .then(response => response.json())
      .then(data => {
        const items = data.items || [];
        historicaMovies = items.filter(item => historicaTitles.includes(item.title)).map(movie => {
          let viewers = (movie.viewers === undefined || movie.viewers === null || movie.viewers === 0) ? (movie.channel === 'Netflix' || movie.channel === 'Streaming' ? '-' : movie.viewers || 0) : movie.viewers;
          // Actualizar viewers reales para Argentina, 1985, El √Ångel y El clan
          if (movie.title === "Argentina, 1985") viewers = 1160067;
          if (movie.title === "El √Ångel") viewers = 1367803;
          if (movie.title === "El clan") viewers = 2652757;
          else if ((movie.channel === 'Netflix' || movie.channel === 'Streaming') && (!movie.viewers || movie.viewers === 0)) viewers = '-';
          return {
            title: movie.title,
            year: parseInt(movie.year),
            viewers: viewers,
            image: movie.image,
            slug: `show.html?id=${movie.id}`
          };
        });
        renderMovies('viewers');
      });

    function renderMovies(sortBy) {
      let movies = [...historicaMovies];
      if (sortBy === 'viewers') {
        movies.sort((a, b) => {
          if (a.viewers === '-') return 1;
          if (b.viewers === '-') return -1;
          return (b.viewers || 0) - (a.viewers || 0);
        });
      } else if (sortBy === 'year') {
        movies.sort((a, b) => b.year - a.year);
      } else if (sortBy === 'year-asc') {
        movies.sort((a, b) => a.year - b.year);
      } else if (sortBy === 'decada-1990') {
        movies = movies.filter(m => m.year >= 1990 && m.year < 2000);
        movies.sort((a, b) => a.year - b.year);
      } else if (sortBy === 'decada-2000') {
        movies = movies.filter(m => m.year >= 2000 && m.year < 2010);
        movies.sort((a, b) => a.year - b.year);
      } else if (sortBy === 'decada-2010') {
        movies = movies.filter(m => m.year >= 2010 && m.year < 2020);
        movies.sort((a, b) => a.year - b.year);
      } else if (sortBy === 'decada-2020') {
        movies = movies.filter(m => m.year >= 2020);
        movies.sort((a, b) => a.year - b.year);
      }
      document.getElementById('actorMoviesList').innerHTML = movies.map(movie => `
        <div class="actor-movie-card">
          <a href="${movie.slug}" tabindex="0">
            <img src="${movie.image}" alt="${movie.title}" loading="lazy" />
          </a>
          <div class="actor-movie-info">
            <div class="actor-movie-title">${movie.title} (${movie.year})</div>
            <div class="actor-movie-viewers">${movie.viewers !== undefined ? (movie.viewers === '-' ? '-' : movie.viewers.toLocaleString() + ' espectadores') : ''}</div>
          </div>
        </div>
      `).join('');
      document.getElementById('actor-movie-count').textContent = `${movies.length} pel√≠culas`;
    }

    // Custom select logic
    document.addEventListener('DOMContentLoaded', function() {
      const select = document.getElementById('actorSortCustom');
      const selected = select.querySelector('.custom-select-selected');
      const options = select.querySelector('.custom-select-options');
      select.addEventListener('click', function(e) {
        options.style.display = options.style.display === 'none' ? 'block' : 'none';
        select.classList.toggle('open');
      });
      options.querySelectorAll('li').forEach(li => {
        li.addEventListener('click', function(e) {
          options.querySelectorAll('li').forEach(opt => opt.classList.remove('selected'));
          li.classList.add('selected');
          selected.textContent = li.textContent;
          options.style.display = 'none';
          select.classList.remove('open');
          renderMovies(li.getAttribute('data-value'));
        });
      });
      document.addEventListener('click', function(e) {
        if (!select.contains(e.target)) {
          options.style.display = 'none';
          select.classList.remove('open');
        }
      });
    });
  </script>
</body>
</html>
